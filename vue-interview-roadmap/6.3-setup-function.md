# 6.3 What is the purpose of the setup() function in Vue 3?

## Quick Revision
- `setup()` is the entry point for the Composition API, running before component creation to initialize reactive state and logic.
- It receives `props` and `context` and must return values to expose them to the template.
- Inside `setup()`, you use Composition API features (`ref`, `reactive`, `computed`, lifecycle hooks) without `this`.

## Detailed Explanation
### Execution Timing
`setup()` executes before the component instance is created, so `this` is undefined. Props are reactive but read-only. The function can return an object (exposed to template) or a render function. `<script setup>` compiles to a `setup()` under the hood, automatically exposing top-level bindings.

### Arguments & Context
The first argument is `props`, reactive but should not be destructured directly (use `toRefs`). The second argument is a context object with `attrs`, `slots`, and `emit`. `emit` replaces `$emit` for emitting events. `expose` allows customizing what refs are exposed to `ref` users.

### Logic Organization
Within `setup()`, you can call composables, register lifecycle hooks (`onMounted`, etc.), and create watchers. Returning state makes it accessible in the template; functions can be returned directly. This structure enables modular, testable code.

## Code Example
```vue
<script>
import { ref, onMounted } from 'vue';

export default {
  props: { start: { type: Number, default: 0 } },
  setup(props, { emit }) {
    const count = ref(props.start);

    function increment() {
      count.value++;
      emit('update:count', count.value);
    }

    onMounted(() => console.log('Mounted with', count.value));

    return { count, increment };
  },
};
</script>
```

## Resources
- [Vue.js Docs – Composition API setup](https://vuejs.org/api/composition-api-setup.html) – official reference for `setup` arguments and return values.
- [Vue.js Docs – `<script setup>`](https://vuejs.org/api/sfc-script-setup.html) – syntactic sugar transforming into `setup()`.
- [Vue School – Understanding setup()](https://vueschool.io/articles/vuejs-tutorials/understanding-the-setup-function-in-vue-js-3/) – tutorial with practical patterns.
