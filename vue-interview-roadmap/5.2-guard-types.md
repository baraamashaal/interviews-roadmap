# 5.2 What’s the difference between beforeEach, beforeEnter, and beforeRouteLeave guards?

## Quick Revision
- `beforeEach` is a global guard that runs on every navigation, ideal for app-wide checks like authentication.
- `beforeEnter` is defined per-route and runs only when entering that specific route (not on component updates).
- `beforeRouteLeave` is an in-component guard that runs when leaving the current route, often used for unsaved-change prompts.

## Detailed Explanation
### Global Guard: beforeEach
Registered on the router instance, `beforeEach` receives `to`/`from` and runs before every navigation, including redirects. Use it for logic that applies universally, such as verifying auth meta fields or logging page views. In Vue Router 4, return `false` to cancel or a route object to redirect.

### Route-Specific Guard: beforeEnter
Configured directly in a route record, `beforeEnter` executes when navigating into that route for the first time or via redirects, but not on query/param updates when the component is reused. This guard is great for fetching route-specific data or validating route params before component creation.

### In-Component Guard: beforeRouteLeave
Defined within component options or via Composition API (`onBeforeRouteLeave`), this guard runs when navigation is leaving the component’s route. It can prevent navigation if there are unsaved changes. Because it has access to component instance state, it can read forms or unsaved drafts.

## Code Example
```js
// router.js
const routes = [
  {
    path: '/admin',
    component: () => import('./AdminDashboard.vue'),
    beforeEnter: (to, from) => {
      if (!hasRole('admin')) return { name: 'forbidden' };
    },
  },
];

router.beforeEach((to) => {
  if (to.meta.requiresAuth && !isLoggedIn()) return { name: 'login' };
});
```
```js
// In a component
import { onBeforeRouteLeave } from 'vue-router';

onBeforeRouteLeave((to, from, next) => {
  if (formHasUnsavedChanges()) {
    const leave = window.confirm('Discard changes?');
    if (!leave) return false;
  }
});
```

## Resources
- [Vue Router Docs – Global Guards](https://router.vuejs.org/guide/advanced/navigation-guards.html#global-before-guards) – usage of `beforeEach`.
- [Vue Router Docs – Per-Route Guards](https://router.vuejs.org/guide/advanced/navigation-guards.html#per-route-guards) – explains `beforeEnter` behavior.
- [Vue Router Docs – In-Component Guards](https://router.vuejs.org/guide/advanced/navigation-guards.html#in-component-guards) – details `beforeRouteLeave` and Composition API equivalents.
