# 6.8 How can you create custom directives in Vue?

## Quick Revision
- Custom directives encapsulate low-level DOM manipulations outside component logic.
- Register directives globally with `app.directive` or locally via the `directives` option / `v-node` functions in Composition API.
- Directive hooks (`created`, `beforeMount`, `mounted`, `updated`, `unmounted`) mirror component lifecycle for DOM access.

## Detailed Explanation
### Defining Directives
In Vue 3, a directive is an object with lifecycle hooks or a function shorthand for `mounted`/`updated`. Hooks receive the element, binding (`value`, `oldValue`, `arg`, `modifiers`), and vnode. Register globally in `main.js` with `app.directive('focus', { mounted(el) { el.focus(); } })` or locally in component options.

### Use Cases
Directives suit DOM behaviors such as autofocus, lazy loading, intersection observers, or third-party library integration. They keep components declarative while encapsulating imperative DOM work.

### Composition API Integration
You can export directives and apply them with `v-my-directive`. Inside SFCs, use the `directives` option or register globally. Avoid using directives for logic that fits better as components or composables.

## Code Example
```js
// focus.js
export const vFocus = {
  mounted(el) {
    el.focus();
  },
};
```
```js
// main.js
import { createApp } from 'vue';
import App from './App.vue';
import { vFocus } from './directives/focus';

createApp(App).directive('focus', vFocus).mount('#app');
```
```vue
<input v-focus />
```

## Resources
- [Vue.js Docs – Custom Directives](https://vuejs.org/guide/reusability/custom-directives.html) – lifecycle hooks and examples.
- [Vue School – Custom Directives Lesson](https://vueschool.io/lessons/custom-directives-in-vue-js) – practical directive patterns.
- [MDN – Intersection Observer API](https://developer.mozilla.org/docs/Web/API/Intersection_Observer_API) – often used in custom directives for lazy loading.
