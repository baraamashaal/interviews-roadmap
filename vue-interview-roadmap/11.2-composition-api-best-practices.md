# 11.2 What are Composition API best practices for scaling large projects?

## Quick Revision
- Organize logic into composables with clear naming, documented inputs/outputs, and unit tests.
- Use TypeScript with explicit return types and interfaces to maintain contracts.
- Maintain folder conventions (e.g., `composables/`, `stores/`) and avoid global singletons unless necessary.

## Detailed Explanation
### Composable Design
Create focused composables that handle one concern (e.g., `useAuth`, `useForm`). Accept parameters to avoid hidden dependencies and return refs/reactive objects with descriptive property names. Document expected lifecycle usage (e.g., requires setup inside components).

### Type Safety & Reusability
Adopt TypeScript or JSDoc to describe composable interfaces. Return readonly refs when exposing derived state to prevent external mutation. Use `provide`/`inject` or Pinia for shared state rather than global variables. Compose smaller composables to build complex features.

### Project Structure & Testing
Group composables under `src/composables` and create index files if necessary. Write unit tests with Vitest to validate edge cases. Track dependencies between composables to prevent circular imports. Use linting rules (eslint-plugin-vue) and naming conventions (`useX`) for discoverability.

## Code Example
```ts
// useAuth.ts
import { ref, computed } from 'vue';

export function useAuth(api) {
  const user = ref(null);
  const loading = ref(false);

  async function login(credentials) {
    loading.value = true;
    user.value = await api.login(credentials);
    loading.value = false;
  }

  const isAuthenticated = computed(() => !!user.value);

  return { user, loading, login, isAuthenticated };
}
```

## Resources
- [Vue.js Docs – Composables](https://vuejs.org/guide/reusability/composables.html#write-idiomatic-composables) – best practices and naming conventions.
- [Pinia Documentation](https://pinia.vuejs.org/introduction.html) – complements Composition API for shared state.
- [VueUse Source](https://github.com/vueuse/vueuse) – reference for well-structured community composables.
