# 6.7 How does the Provide/Inject API work?

## Quick Revision
- `provide` allows ancestor components to supply values; `inject` lets descendants access them without prop drilling.
- Values are reactive when provided as refs/reactives; primitives remain static unless wrapped.
- Use Provide/Inject for dependency injection patterns, plugin configuration, or global services.

## Detailed Explanation
### Providing Values
Call `provide(key, value)` inside `setup()` (or use the Options API’s `provide` option) to register a value on the component instance. Keys can be strings or symbols. Provided values are available to all descendants, not just direct children.

### Injecting Values
Descendant components call `inject(key, defaultValue)` to retrieve the provided value. If the provided value is reactive (ref or reactive object), the consumer sees updates. Injected values are read-only by convention; to allow mutation, provide methods or reactive state and document usage.

### Use Cases & Patterns
Provide/Inject is great for theming, localization, or sharing service instances (e.g., a global event bus). It complements but does not replace Vuex/Pinia for large-scale state. Provide defaults when injection fails to keep components decoupled.

## Code Example
```js
// Provider
import { provide, ref } from 'vue';

const theme = ref('light');
provide('theme', theme);
```
```js
// Consumer
import { inject } from 'vue';

const theme = inject('theme', 'light');
```
Changing `theme.value` in the provider updates consumers automatically.

## Resources
- [Vue.js Docs – Provide/Inject](https://vuejs.org/guide/components/provide-inject.html) – official patterns and caveats.
- [VueUse – provideReactive](https://vueuse.org/shared/providereactive/) – helper utilities for reactive injection.
- [Vue School – Dependency Injection in Vue 3](https://vueschool.io/articles/vuejs-tutorials/dependency-injection-in-vue-js-3/) – tutorial with common scenarios.
