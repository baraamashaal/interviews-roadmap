# 6.1 How do you create and use async components in Vue?

## Quick Revision
- Async components defer loading of component code until needed, reducing initial bundle size.
- Use `defineAsyncComponent` (Vue 3) or dynamic imports with `defineAsyncComponent(() => import('./Foo.vue'))`.
- Provide loading/error components and timeouts for better UX when lazy loading.

## Detailed Explanation
### Defining Async Components
In Vue 3, import `defineAsyncComponent` and pass a loader function that returns a promise. The component resolves when the promise fulfills. In templates, async components behave like normal components; Vue handles the promise internally.

### Advanced Options
`defineAsyncComponent` accepts an options object allowing `loader`, `loadingComponent`, `errorComponent`, `delay`, and `timeout`. This lets you show skeletons or fallbacks while fetching the component. Combine with dynamic routing or conditional rendering to load on demand.

### Usage Patterns
Async components pair well with code-splitting via bundlers (Vite/Webpack). They work with Suspense in Vue 3, enabling placeholder templates until async components resolve. For route-level code splitting, use dynamic imports in Vue Router’s route records.

## Code Example
```js
import { defineAsyncComponent } from 'vue';

export const AsyncChart = defineAsyncComponent({
  loader: () => import('./Chart.vue'),
  loadingComponent: () => import('./ChartSkeleton.vue'),
  delay: 200,
  timeout: 5000,
});
```
```vue
<template>
  <Suspense>
    <template #default>
      <AsyncChart />
    </template>
    <template #fallback>
      <p>Loading chart…</p>
    </template>
  </Suspense>
</template>
```

## Resources
- [Vue.js Docs – Async Components](https://vuejs.org/guide/components/async.html) – official usage patterns and options.
- [Vue.js Docs – Suspense](https://vuejs.org/guide/built-ins/suspense.html) – integrating async components with fallback UI.
- [Vite Docs – Code Splitting](https://vitejs.dev/guide/features.html#dynamic-import) – explains how dynamic imports produce separate chunks.
