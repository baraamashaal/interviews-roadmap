# 1.3 Walk me through the Vue lifecycle hooks. Which ones are most commonly used?

## Quick Revision
- Lifecycle hooks fire during component creation, mounting, updating, and unmounting.
- Common hooks: `onMounted`/`mounted` for DOM access, `onBeforeUnmount`/`beforeDestroy` for cleanup, `onUpdated`/`updated` for reacting to DOM updates.
- Vue 3 exposes lifecycle hooks inside `setup()` via `onX` helpers (e.g., `onMounted`), maintaining parity with Options API equivalents.

## Detailed Explanation
### Creation Phase
In Vue 2 Options API, `beforeCreate` and `created` run before the component is mounted. `created` is often used for initial data fetching because reactivity is ready but the DOM is not. In Vue 3 Composition API, this logic typically lives directly in `setup()`.

### Mounting Phase
`beforeMount` executes right before the initial render. `mounted` (or `onMounted` in Composition API) runs after the component’s template has been rendered and inserted into the DOM. It is ideal for interacting with DOM APIs, third-party libraries, or measurements.

### Update Phase
When reactive state changes, `beforeUpdate` triggers before the DOM patch, while `updated` fires after the DOM is updated. Use `watch` or computed props for most state reactions; reserve `updated` for DOM-dependent side effects.

### Unmounting Phase
`beforeUnmount` (`beforeDestroy` in Vue 2) runs before the component is removed. `unmounted` (`destroyed`) executes after teardown. They are crucial for removing event listeners, canceling network requests, or cleaning intervals. In Composition API, use `onBeforeUnmount` and `onUnmounted` helpers.

### Error Handling & Suspense
Vue 2.5+ adds `errorCaptured` to catch errors from child components. Vue 3 also exposes `onErrorCaptured`. Suspense components provide `onServerPrefetch` for SSR data fetching. Keep cleanup in `onBeforeUnmount` to avoid leaks.

## Code Example
```vue
<script setup>
import { onMounted, onBeforeUnmount, ref } from 'vue';

const width = ref(window.innerWidth);

function updateWidth() {
  width.value = window.innerWidth;
}

onMounted(() => {
  window.addEventListener('resize', updateWidth);
});

onBeforeUnmount(() => {
  window.removeEventListener('resize', updateWidth);
});
</script>

<template>
  <p>Viewport width: {{ width }}px</p>
</template>
```

## Resources
- [Vue.js Docs – Lifecycle Diagram](https://vuejs.org/guide/essentials/lifecycle.html) – official overview of lifecycle phases and hooks.
- [Vue.js Docs – Composition API Lifecycle Hooks](https://vuejs.org/guide/essentials/lifecycle.html#lifecycle-hooks) – explains `onMounted`, `onUpdated`, etc.
- [Vue.js Docs – Handling Errors](https://vuejs.org/guide/best-practices/handling-errors.html) – covers `errorCaptured` and error boundaries.
