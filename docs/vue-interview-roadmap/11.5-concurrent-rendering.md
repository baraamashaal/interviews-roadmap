# 11.5 Explain how Vue handles concurrent rendering and async updates.

## Quick Revision
- Vue 3 uses a job queue and microtask scheduling to batch reactive updates, preventing unnecessary renders.
- Suspense and async components allow Vue to pause rendering while awaiting promises, but Vue does not implement React-style concurrent mode.
- `nextTick` and scheduler APIs let you coordinate DOM updates after Vue flushes the queue.

## Detailed Explanation
### Scheduler & Job Queue
When reactive state changes, Vue queues effect jobs and flushes them asynchronously (microtasks). Multiple state changes within the same tick collapse into one render. Vue prioritizes component updates over user-created jobs, ensuring consistent UI.

### Async Components & Suspense
Async setup and Suspense introduce controlled async rendering: Vue can delay rendering a branch until promises resolve, showing fallback content. However, Vue still renders synchronously once data is ready; it doesn’t interrupt rendering mid-way like React concurrent mode.

### nextTick & Custom Scheduling
`nextTick` allows waiting for Vue’s DOM updates before running code. Advanced users can provide a custom scheduler when creating effects to integrate with requestAnimationFrame. Libraries like VueUse offer throttled/debounced refs to manage async update patterns.

## Code Example
```js
import { ref, nextTick } from 'vue';

const count = ref(0);
count.value++;
await nextTick();
console.log(document.querySelector('#count').textContent);
```

## Resources
- [Vue.js Docs – Reactivity in Depth](https://vuejs.org/guide/extras/reactivity-in-depth.html#effect-scheduler) – explains the scheduler and job queue.
- [Vue.js Docs – nextTick](https://vuejs.org/api/general.html#nexttick) – usage patterns for post-update logic.
- [Evan You – State of Vue 3 (VueConf)](https://www.youtube.com/watch?v=YrxBCBibVo0) – discussion on Vue’s async update strategy vs React concurrent mode.
